<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="shortcut icon" href="/images/favicon.png" />

    <title>Home E-Commerce</title>
    <meta name="description" content="description goes here" />

    <link rel="stylesheet" href="/css/global.css" />
    <link rel="stylesheet" href="/css/vendor.css" />
	<link rel="stylesheet" href="/css/home.css" />
	<link rel="stylesheet" href="/components/cp-product-view/cp-product-view.css" />
  </head>

  <body>   
    <main class="main">
		<!-- Best selling start -->		
		<section class="bs-sec typ-gray-bg typ-curve typ-inner-spacing">
			<div class="container">
				<div class="sec-head">
					<h2 class="sec-title">Best-selling products</h2>
					<p class="desc">Panchayawala, Jaipur. Rajasthan - 302020</p>
				</div>
				<div class="sec-cont">
					<div class="bs-swiper swiper typ-best-selling js-best-selling">
						<div class="swiper-wrapper" id="bestSellingProduct">
							
						</div>
						<div class="swiper-nav">
							<div class="swiper-button-prev best-selling-prev"></div>
							<div class="swiper-button-next best-selling-next"></div>
						</div>
					</div>					
				</div>
			</div>
		</section>
		
		<!-- Handlebars Template (outside rendered area) -->
		<script id="productSellingTemp" type="text/x-handlebars-template">
			{{#each product}}
				<div class="swiper-slide">
					<div class="cp-product-view">
					<div class="img-wrap">
						<picture>
						<source media="(max-width:768px)" srcset="{{image}}">
						<source media="(max-width:991px)" srcset="{{image}}">
						<img src="{{image}}" alt="{{name}}" />
						</picture>
					</div>
					<div class="content-wrap">
						<h3 class="brand-name">
						{{#each categories}}
							{{#if (eq is_brand "1")}}
								{{name}}
							{{/if}}
						{{/each}}
						</h3>
						<h4 class="product-title">{{name}}</h4>
						<ul class="rating-list">
						<li class="rating-item">
							<span class="icon icon-star active"></span>
						</li>
						<li class="rating-item">
							<span class="icon icon-star active"></span>
						</li>
						<li class="rating-item">
							<span class="icon icon-star active"></span>
						</li>
						<li class="rating-item">
							<span class="icon icon-star"></span>
						</li>
						<li class="rating-item">
							<span class="icon icon-star"></span>
						</li>
						</ul>
						<p class="cancel-amt">₹{{price}}</p>
						<p class="current-amt"><span class="amt">₹{{special}}</span> per piece</p>
					</div>
					</div>
				</div>
			{{/each}}
		</script>
					  
		<!-- Best selling end -->
    </main>

    <!-- build:js assets/js/vendor.js -->
    <script src="/js/vendor/jquery-3.7.1.min.js"></script>
    <script src="/js/vendor/swiper-bundle.min.js"></script>
	<script src="/js/vendor/handlebars.js"></script>
    <!-- endbuild -->
    <!-- build:js assets/js/custom.min.js -->
    <script src="/js/global.js"></script>	
	<script src="/components/cp-product-view/cp-product-view-temp.js"></script>
	<script src="/components/cp-product-view/cp-product-view.js"></script>
	<!-- <script>
		Handlebars.registerHelper('eq', function (a, b) {
		return a === b;
		});

		$(document).ready(function () {
			const jsonUrl = 'http://localhost:8000/json/ProductDetails.json';

			fetch(jsonUrl)
				.then((response) => {
					if (!response.ok) {
						throw new Error(`HTTP error! Status: ${response.status}`);
					}
					return response.json();
				})
				.then((data) => {
					if (!data) {
						throw new Error('Invalid JSON structure. Expected "data.product".');
					}
					console.log(data);
					// Compile the template
					const source = $('#swiperTemplate').html();
					if (!source) {
						console.error('Template source not found!');
						return;
					}
					console.log('Template source:', source);

					const template = Handlebars.compile(source);
					console.log('Compiled template:', template);

					const html = template(data.data);
					console.log('Generated HTML:', html);
					bestSellingSlider();
					
				})
				.catch((error) => {
					console.error('Error fetching JSON or rendering template:', error);
				});
		});
	</script> -->
    <!-- endbuild -->
  </body>
</html>
